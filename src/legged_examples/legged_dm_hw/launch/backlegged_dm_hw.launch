<launch>
  <!-- 机器人类型 -->
  <arg name="robot_type" default="dm" doc="Robot type: [yks]"/>

  <!-- 硬件驱动节点 -->
  <node name="legged_dm_hw" pkg="legged_dm_hw" type="legged_dm_hw"
        respawn="false" clear_params="true" output="screen">

    <!-- URDF -->
    <param name="legged_robot_description"
           command="$(find xacro)/xacro $(find wanren_arm)/urdf/wanren_arm.urdf robot_type:=$(arg robot_type)"/>
    <param name="manual_topic_override" value="true"/>
    <param name="manual_cmd_timeout" value="0.2"/>
    <rosparam file="$(find legged_dm_hw)/config/$(arg robot_type).yaml" command="load"/>
        <param name="loop_hz" value="500"/>
    <param name="cycle_time_error_threshold" value="0.002"/>
    <param name="thread_priority" value="95"/>
  </node>

  <!-- 控制循环必需参数（注意：放在 node 外面，属于 ns/mcuX 全局，而不是 ns/mcuX/legged_dm_hw 私有） -->
    <param name="loop_hz" value="500"/>
    <param name="cycle_time_error_threshold" value="0.002"/>
    <param name="thread_priority" value="95"/>

  <!-- 可选：IMU 驱动，按需启用 -->
  <!--
  <node pkg="yesense_imu" type="yesense_imu_node" name="yesense_imu_node"
        output="screen" respawn="true" respawn_delay="0.002">
    <param name="yesense_port" type="string" value="/dev/ttyACM1"/>
    <param name="yesense_baudrate" type="int" value="460800"/>
  </node>
  -->

  <!--
  <node pkg="dm_imu" type="dm_imu_node" name="dm_imu_node"
        required="true" output="screen">
    <param name="port" type="string" value="/dev/ttyACM1"/>
    <param name="baud" type="int" value="921600"/>
  </node>
  -->
</launch>